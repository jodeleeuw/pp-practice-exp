<!DOCTYPE html>
<html>
<head>
  <style>

  @import url(https://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700);

  html {
    height: 100%;
    width: 100%;
    font-family: 'Open Sans';
  }
  body {
    margin:0;
    width: 100%;
    height: 100%;
    background: repeating-linear-gradient(
      90deg,
      hsla(232, 41%, 56%, 1),
      hsla(232, 41%, 56%, 1) 3px,
      hsla(232, 41%, 60%, 1) 3px,
      hsla(232, 41%, 60%, 1) 18px
    );
    display: flex;
    flex-direction: column;
    overflow-y: auto;
    overflow-x: hidden;
  }

  @keyframes anim-slide {
    0% {transform: translateX(300%) }
    10% {transform: translateX(0%) }
    90% {transform: translateX(0%) }
    100% {transform: translateX(-300%) }
  }

  @keyframes slide-in {
    0% {transform: translateX(300%) }
    100% {transform: translateX(0%) }
  }

  @keyframes slide-out {
    0% {transform: translateX(0%) }
    100% {transform: translateX(-300%) }
  }

  </style>
</head>
<body>
    <div style="display: flex; margin: auto; flex: 1 1 100%; width: 100%;">
      <div style="text-align:center; margin:auto;">
        <div id="card" style="visibility: hidden; width:500px; height: 300px; background-color: #fff; box-shadow: 0 2px 4px 0 rgba(0,0,0,0.50); font-size:60px; font-family:'Open Sans'; color: #555;">
          <p style="line-height:150px; margin:0;">napkin</p>
          <p style="line-height:150px; margin:0;">viking</p>
          <div id="timer"></div>
        </div>
        <p id="sub" style="font-size: 18px; font-weight: bold; color: white">1 of 36</p>
      </div>
    </div>
</body>
<script>

var study_duration = 1000;

/* audio */

var context = new AudioContext();
var slideBuffer = null;

var request = new XMLHttpRequest();
request.open('GET', 'audio/slide.mp3', true);
request.responseType = 'arraybuffer';

// Decode asynchronously
request.onload = function() {
  context.decodeAudioData(request.response, function(buffer) {
      slideBuffer = buffer;
      ready();
  }, onError);
}
request.send();

/* end audio */

function ready(){

  var source = context.createBufferSource();
  source.buffer = slideBuffer;
  source.connect(context.destination);
  source.start(0);

  document.querySelector('#card').style.visibility = 'visible';
  document.querySelector('#card').style.animation = "slide-in 0.5s forwards";

  document.querySelector('#card').addEventListener('animationend', function(){
    setTimeout(slideOut, study_duration);
  }, {once: true});

  function slideOut(){
    document.querySelector('#card').style.animation = "slide-out 0.5s forwards";
    source.start(0);
  }

}


</script>
</html>
